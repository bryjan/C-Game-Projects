
#include <iostream>
#include <string>
#include <iomanip>
#include <ctime>
#include <stdlib.h>
using namespace std;
bool gameState = true;
char terChar[40][30];
int fur = 0;
int food = 150;
int energy = 150;
int score = 0;
void stats(int fur, int food, int energy, int score);
char mapGen();
void printMap();
char choice();
void movement(char d);
void reprint();
void enviorment(char);
int main()
{
	//int seed = 0;
	//cout << "Enter seed #: ";
	//cin >> seed;
	char dire = ' ';
	int y = -1;
	for (int i = 0; i<30; i++)
	{
		y++;
		for (int x = 0; x<40; x++)
		{
			terChar[x][y] = mapGen();
		}
	}
	stats(fur, food, energy, score);
	printMap();
	do
	{
		dire = choice();
		movement(dire);
		cout << endl << endl << endl << endl << endl;
		if (dire == 'w' || dire == 'a' || dire == 's' || dire == 'd')
			enviorment(dire);
		stats(fur, food, energy, score);
		printMap();
	} while (food >= 0 && energy >= 0);
	cout << "You died" << endl;
	return 0;
}

char mapGen()
{
	int genNum = 0;
	genNum = 0 + rand() % (100-0+1);
	if (genNum<50) return '_';
	else if (genNum<80)
		return 'f';
	else if (genNum<98)
		return 'm';
	else
		return 'C';
}

void printMap()
{
	int y = -1;
	for (int i = 0; i<30; i++)
	{
		y++;
		for (int x = 0; x<40; x++)
		{
			if (x == 0 || x == 39 || y == 0 || y == 29)
				cout << "X";
			else if (x == 20 && y == 15)
				cout << "A";
			else
				cout << terChar[x][y];
		}
		cout << endl;
	}
}

char choice()
{
	char l;
	cout << endl << endl << " use 'wasd' to move: ";
	cin >> l;
	return l;
}

void movement(char d)
{
	if (d == 'w')
	{
		int y = -1;
		for (int i = 0; i<30; i++)
		{
			y++;
			for (int x = 0; x<40; x++)
			{
				terChar[39 - x][29 - y] = terChar[39 - x][28 - y];
			}
		}
		for (int x = 0; x<40; x++)
		{
			terChar[x][30] = mapGen();
		}
	}
	else if (d == 's')
	{
		int y = -1;
		for (int i = 0; i<30; i++)
		{
			y++;
			for (int x = 0; x<40; x++)
			{
				terChar[x][y] = terChar[x][y + 1];
			}
		}
		for (int x = 0; x<40; x++)
		{
			terChar[x][0] = mapGen();
		}
	}
	else if (d == 'd')
	{
		int y = -1;
		for (int i = 0; i<30; i++)
		{
			y++;
			for (int x = 0; x<40; x++)
			{
				terChar[x][y] = terChar[x + 1][y];
			}
			for (int i = 0; i<30; i++)
			{
				terChar[40][i] = mapGen();
			}
		}
		
	}
	else if (d == 'a')
	{
		int y = -1;
		for (int i = 0; i<30; i++)
		{
			y++;
			for (int x = 0; x<40; x++)
			{
				terChar[39-x][29-y] = terChar[38 - x][29 - y];
			}
		}
		for (int i = 0; i<30; i++)
		{
			terChar[0][i] = mapGen();
		}
	}
	else
	{
		if (terChar[20][15] == 'f')
		{
			energy -= 2;
			food += -1 + rand()% (4 -1 + 1);
			fur += 0 + rand()%(3 - 0 + 1);
		}
		else if (terChar[20][15] == '_')
		{
			energy += 0 + rand()% (5 -0 + 1);
			food -= 2;
		}
	}
}

void enviorment(char)
{
	if (terChar[20][15] == 'C')
	{
		score++;
		energy = 15;
		food += fur;
		fur = 0;
		terChar[20][15] = 'c';
	}
	else if (terChar[20][15] == '_')
	{
		energy -= 1;
		food -= 1;
	}
	else if (terChar[20][15] == 'f')
	{
		energy -= 2;
		food += -1 + rand()% (3 - 1 + 1);
	}
	else if (terChar[20][15] == 'c')
	{
	}
	else
	{
		energy -= 4;
		food -= 3;
	}
}

void stats(int fur, int food, int energy, int score)
{
	cout << "fur: " << fur << " food: " << food << " energy: " << energy << endl;
	cout << "score: " << score << endl;
}
